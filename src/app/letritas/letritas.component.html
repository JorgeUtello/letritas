<div class="letritas-container">
	<h2>¡Adivina la palabra!</h2>
	<div class="inputs">
		<ng-container *ngFor="let letter of guessArray; let i = index">
			<input maxlength="1" [ngStyle]="{'background': getBgColor(i)}" [(ngModel)]="guessArray[i]"
				(focus)="selectedInput = i" (input)="onInput(i, $event)" (keydown.enter)="checkGuess()"
				[disabled]="gameOver" readonly />
		</ng-container>
	</div>
	<!-- DESKTOP -->
	<div class="keyboard">
		<div class="keyboard-row">
			<button type="button" *ngFor="let key of keyboardRows[0]" (click)="onVirtualKey(key)" [disabled]="gameOver"
				[ngClass]="getKeyClass(key)">{{ key }}</button>
			<button type="button" (click)="onDeleteKey()" [disabled]="gameOver" class="keyboard-row">⌫</button>
		</div>
		<div class="keyboard-row">
			<button type="button" *ngFor="let key of keyboardRows[1]" (click)="onVirtualKey(key)" [disabled]="gameOver"
				[ngClass]="getKeyClass(key)">{{ key }}</button>
		</div>
		<div class="keyboard-row">
			<button type="button" *ngFor="let key of keyboardRows[2]" (click)="onVirtualKey(key)" [disabled]="gameOver"
				[ngClass]="getKeyClass(key)">{{ key }}</button>
				<button type="button" (click)="checkGuess()" [disabled]="gameOver" class="keyboard-row send">ENVIAR</button>
		</div>
	</div>
	<!-- MOBILE -->
	<div class="keyboard-mobile">
		<div class="keyboard-row">
			<button type="button" *ngFor="let key of keyboardRows[0]" (click)="onVirtualKey(key)" [disabled]="gameOver"
				[ngClass]="getKeyClass(key)">{{ key }}</button>
		</div>
		<div class="keyboard-row">
			<button type="button" *ngFor="let key of keyboardRows[1]" (click)="onVirtualKey(key)" [disabled]="gameOver"
				[ngClass]="getKeyClass(key)">{{ key }}</button>
		</div>
		<div class="keyboard-row">
			<button type="button" *ngFor="let key of keyboardRows[2]" (click)="onVirtualKey(key)" [disabled]="gameOver"
				[ngClass]="getKeyClass(key)">{{ key }}</button>
				<button type="button" (click)="onDeleteKey()" [disabled]="gameOver" class="keyboard-row">⌫</button>
		</div>
	</div>
	<!--button (click)="checkGuess()" [disabled]="gameOver">Enviar</button-->
	<div *ngIf="message" class="message">{{ message }}</div>
	<div *ngIf="gameOver" class="gameover">
		<button (click)="reset()">Jugar de nuevo</button>
	</div>
	<div class="attempts-list">
		<div *ngFor="let attempt of attemptsList" class="attempt-row">
			<span *ngFor="let letter of attempt.split(''); let i = index" [ngClass]="{
          'cell-correct': letter === word[i],
          'cell-present': letter !== word[i] && word.includes(letter),
          'cell-absent': !word.includes(letter)
        }">{{ letter }}</span>
		</div>
	</div>
	<div style="margin-bottom: 1em;">
		<label>
			<input type="checkbox" [(ngModel)]="showLengthInput" />
			Elegir cantidad de letras
		</label>
		<div *ngIf="showLengthInput" style="margin-top: 0.5em;">
			<label for="slider">Cantidad de letras: {{ wordLength }}</label>
			<input id="slider" type="range" min="2" max="10" [(ngModel)]="wordLength" (input)="fetchWord(wordLength)" />
			<input type="number" min="2" max="10" [(ngModel)]="wordLength" (change)="fetchWord(wordLength)"
			style="width: 3em; margin-left: 0.5em;" />
		</div>
	</div>
	<div *ngIf="!gameOver" class="giveup-container">
		<button (click)="giveUp()">Me rindo</button>
	</div>
	<div class="reload-container">
		<button class="reload-btn" (click)="reloadPage()" title="Recargar">
			<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M11 3a8 8 0 1 1-7.06 4.47" stroke="#888" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
				<polyline points="3 7 7 7 7 3" stroke="#888" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
			</svg>
		</button>
	</div>
</div>